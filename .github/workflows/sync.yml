name: Sync Fork (peinture)

on:
  schedule:
    - cron: '0 */6 * * *'
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Sync Upstream
        uses: aormsby/fork-sync-with-upstream-action@v3.4
        with:
          upstream_sync_repo: Amery2010/peinture
          upstream_sync_branch: main
          target_sync_branch: main
          upstream_repo_access_token: ${{ secrets.GITHUB_TOKEN }}

      - name: Telegram é€šçŸ¥
        run: |
          MESSAGE='ğŸ¨ peinture ä»“åº“åŒæ­¥æé†’
          
          GitHub Action å·²æ‰§è¡Œ Fork åŒæ­¥ä»»åŠ¡ã€‚
          
          ä»“åº“ï¼šwylangyue/peinture
          ä¸Šæ¸¸ï¼šAmery2010/peinture
          
          å¦‚ä¸Šæ¸¸å­˜åœ¨æ›´æ–°ï¼Œå·²è‡ªåŠ¨åŒæ­¥åˆ°ä½ çš„ Forkã€‚'

          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            --data-urlencode "chat_id=${{ secrets.TELEGRAM_CHAT_ID }}" \
            --data-urlencode "text=${MESSAGE}"
